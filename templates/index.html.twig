<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>NY Pizza</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
    <link rel="stylesheet" href="{{asset('assets/themes/my-theme.min.css')}}" />
    <link rel="stylesheet" href="{{asset('assets/css/styles.css')}}" /> {#loads assets such as css and js from public folder#}
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
</head>
<body>
    <!-- Start of main home page -->
    <div data-role="page" id="home">
        {% include 'header.html.twig' %}
        <div data-role="main" class="ui-content">
            <div class="width-960">
                <h1 class="main-ad" id="main-ad-new">NEW</h1>
                <h1 class="main-ad" id="main-ad-store">STORE</h1>
                <h1 class="main-ad" id="main-ad-now">NOW</h1>
                <h1 class="main-ad" id="main-ad-open">OPEN</h1>
            </div>            
        </div> 
        <div data-role="main" class="ui-content">
            <div class="width-960 ui-grid-a">
                <div class="ui-block-a">
                    <p id="address">
                        127 Delicious Street<br>
                        Tasty Town<br>
                        Waterford City<br>
                        Ireland<br>
                        <br>
                        <a href="tel:0035351875432">+353 51 875432</a>
                    </p>
                </div>
                <iframe class="ui-block-b" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d78185.27297987707!2d-7.180868291784324!3d52.23812000037038!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4842c6aa3dbbb39f%3A0x5c5394616bfdc1ac!2sWaterford+City%2C+Co.+Waterford!5e0!3m2!1sen!2sie!4v1553505960973" width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>
            </div>            
        </div>           
        {% include 'footer.html.twig' %}         
    </div><!-- /page one -->
           
    <!-- Start of register page -->
    <div data-role="page" id="register">
        {% include 'header.html.twig' %}
        <div data-role="main" class="ui-content width-720">
            <h1 class="red-heading">Register</h1>
            <form id="registerForm">
                <input type="text" id="reg-first-name" name="reg-first-name" placeholder="First Name" required>
                <input type="text" id="reg-last-name" name="reg-last-name" placeholder="Last Name" required>
                <input type="email" id="reg-email" name="reg-email" placeholder="Email" required>
                <input type="password" id="reg-password" name="reg-password" placeholder="Password" required>
                <fieldset data-role="controlgroup" data-type="horizontal">
                    <legend>Account Type:</legend>
                    <input type="radio" name="account-type" id="customer" value="customer" checked="checked">
                    <label for="customer">Customer</label>
                    <input type="radio" name="account-type" id="driver" value="driver">
                    <label for="driver">Driver</label>
                    <input type="radio" name="account-type" id="manager" value="manager">
                    <label for="manager">Manager</label>
                </fieldset>
                <button class="ui-btn ui-corner-all ui-btn-inline" id="registerButton">Register</button>
            </form>               
        </div>            
        {% include 'footer.html.twig' %} 
    </div><!-- /register -->
    
    <div data-role="page" id="login">
        {% include 'header.html.twig' %}
        <div class="width-560">
            <h1 class="green-heading">Login</h1>
            <form id="loginForm">
                <input type="email" id="login-email" name="login-email" placeholder="Email" required>
                <input type="password" id="login-password" name="login-password" placeholder="Password" required>
                <button class="ui-btn ui-corner-all ui-btn-inline" id="loginButton">Login</button>
            </form>
        </div>        
        {% include 'footer.html.twig' %}
    </div><!-- /login -->

    <div data-role="page" id="menu">
        {% include 'header.html.twig' %}
        <div data-role="main" class="ui-content width-960">
            <h1 class="red-heading">Menu</h1>
            <h2 class="green-heading-small">Pizzas</h2>
            <div class="flex-container">                
                <!-- hawaiian pizza -->
                <div class="menu-item-container ui-block-a">
                    <h3 class="menu-item-heading">Hawaiian</h3>
                    <img class="pizza-img" src="{{asset('assets/images/custom.jpg')}}" alt="Hawaiian Pizza Image">
                    <form id="hawaiian-pizza-form">
                        <fieldset data-role="controlgroup" data-type="horizontal">
                            <input type="radio" name="hawaiian-pizza-size" id="hawaiian-pizza-s" value="s" checked="checked">
                            <label for="hawaiian-pizza-s">S &euro;5</label>
                            <input type="radio" name="hawaiian-pizza-size" id="hawaiian-pizza-m" value="m">
                            <label for="hawaiian-pizza-m">M &euro;10</label>
                            <input type="radio" name="hawaiian-pizza-size" id="hawaiian-pizza-l" value="l">
                            <label for="hawaiian-pizza-l">L &euro;11</label>
                        </fieldset>
                        <div class="quantity-flex-container">
                            <button class="pizza-minus-button" id="hawaiian-pizza-minus-button">-</button>
                            <input type="text" class="pizza-qty" name="hawaiian-pizza-qty" value="1" readonly>
                            <button class="ui-button pizza-plus-button" id="hawaiian-pizza-plus-button">+</button>
                        </div><button class="ui-button hawaiian-pizza-add-button">Add to Cart</button>
                    </form>
                </div> <!-- /hawaiian pizza -->
                <!-- newyorker pizza -->
                <div class="menu-item-container ui-block-a">
                    <h3 class="menu-item-heading">New Yorker</h3>
                    <img class="pizza-img" src="{{asset('assets/images/custom.jpg')}}" alt="New Yorker Pizza Image">
                    <form id="newyorker-pizza-form">
                        <fieldset data-role="controlgroup" data-type="horizontal">
                            <input type="radio" name="newyorker-pizza-size" id="newyorker-pizza-s" value="s" checked="checked">
                            <label for="newyorker-pizza-s">S &euro;5</label>
                            <input type="radio" name="newyorker-pizza-size" id="newyorker-pizza-m" value="m">
                            <label for="newyorker-pizza-m">M &euro;10</label>
                            <input type="radio" name="newyorker-pizza-size" id="newyorker-pizza-l" value="l">
                            <label for="newyorker-pizza-l">L &euro;11</label>
                        </fieldset>
                        <div class="quantity-flex-container">
                            <button class="pizza-minus-button" id="newyorker-pizza-minus-button">-</button>
                            <input type="text" class="pizza-qty" name="newyorker-pizza-qty" value="1" readonly>
                            <button class="ui-button pizza-plus-button" id="newyorker-pizza-plus-button">+</button>
                        </div><button class="ui-button newyorker-pizza-add-button">Add to Cart</button>
                    </form>
                </div> <!-- /newyorker pizza -->
                <!-- housespecial pizza -->
                <div class="menu-item-container ui-block-a">
                    <h3 class="menu-item-heading">House Special</h3>
                    <img class="pizza-img" src="{{asset('assets/images/custom.jpg')}}" alt="House Special Pizza Image">
                    <form id="housespecial-pizza-form">
                        <fieldset data-role="controlgroup" data-type="horizontal">
                            <input type="radio" name="housespecial-pizza-size" id="housespecial-pizza-s" value="s" checked="checked">
                            <label for="housespecial-pizza-s">S &euro;5</label>
                            <input type="radio" name="housespecial-pizza-size" id="housespecial-pizza-m" value="m">
                            <label for="housespecial-pizza-m">M &euro;10</label>
                            <input type="radio" name="housespecial-pizza-size" id="housespecial-pizza-l" value="l">
                            <label for="housespecial-pizza-l">L &euro;11</label>
                        </fieldset>
                        <div class="quantity-flex-container">
                            <button class="pizza-minus-button" id="housespecial-pizza-minus-button">-</button>
                            <input type="text" class="pizza-qty" name="housespecial-pizza-qty" value="1" readonly>
                            <button class="ui-button pizza-plus-button" id="housespecial-pizza-plus-button">+</button>
                        </div><button class="ui-button housespecial-pizza-add-button">Add to Cart</button>
                    </form>
                </div> <!-- /housespecial pizza -->
                <!-- custom pizza -->
                <div class="menu-item-container ui-block-a">
                    <h3 class="menu-item-heading">Custom</h3>
                    <img class="pizza-img" src="{{asset('assets/images/custom.jpg')}}" alt="Custom Pizza Image">
                    <form id="custom-pizza-form">
                        <fieldset data-role="controlgroup" data-type="horizontal">
                            <input type="radio" name="custom-pizza-size" id="custom-pizza-s" value="s" checked="checked">
                            <label for="custom-pizza-s">S &euro;5</label>
                            <input type="radio" name="custom-pizza-size" id="custom-pizza-m" value="m">
                            <label for="custom-pizza-m">M &euro;10</label>
                            <input type="radio" name="custom-pizza-size" id="custom-pizza-l" value="l">
                            <label for="custom-pizza-l">L &euro;11</label>
                        </fieldset>
                        <div class="quantity-flex-container">
                            <button class="pizza-minus-button" id="custom-pizza-minus-button">-</button>
                            <input type="text" class="pizza-qty" name="custom-pizza-qty" value="1" data-enhance="false" readonly>
                            <button class="ui-button pizza-plus-button" id="custom-pizza-plus-button">+</button>
                        </div>
                        
                        <h3 class="menu-item-heading">Toppings +&euro;1 each</h3>
                        <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
                            <input type="checkbox" name="ham" id="ham">
                            <label for="ham">ham</label>
                            <input type="checkbox" name="chicken" id="chicken">
                            <label for="chicken">chicken</label>
                            <input type="checkbox" name="pepperoni" id="pepperoni">
                            <label for="pepperoni">pepperoni</label>
                            <input type="checkbox" name="sweetcorn" id="sweetcorn">
                            <label for="sweetcorn">sweetcorn</label>
                            <input type="checkbox" name="tomato" id="tomato">
                            <label for="tomato">tomato</label>
                            <input type="checkbox" name="peppers" id="peppers">
                            <label for="peppers">peppers</label>
                        </fieldset>
                        <button class="ui-button custom-pizza-add-button">Add to Cart</button>
                    </form>
                </div> <!-- /custom pizza -->


            </div>
            
        </div>
        {% include 'footer.html.twig' %}
    </div><!-- /menu-->

    <div data-role="page" id="checkout">
        {% include 'header.html.twig' %}
        {% include 'footer.html.twig' %}
    </div><!-- /checkout-->

    <div data-role="page" id="driver">
        {% include 'header.html.twig' %}
        {% include 'footer.html.twig' %}
    </div><!-- /driver-->  

    <div data-role="page" id="manager">
        {% include 'header.html.twig' %}
        {% include 'footer.html.twig' %}
    </div><!-- /manager-->

    <div data-role="page" id="customer">
        {% include 'header.html.twig' %}
        {% include 'footer.html.twig' %}
    </div><!-- /customer-->
    
    </body>
    
    <script> 
        
        $("#registerForm").submit(function() {
      
            let firstName = $("#reg-first-name").val();         
            let lastName = $("#reg-last-name").val();
            let email = $("#reg-email").val(); 
            let password = $("#reg-password").val();
            let accountType = $("input[name='account-type']:checked").val(); //get radio button value thats checked
            
            $.post( "/backend", { type:"register", firstName:firstName, lastName:lastName,
            email:email, password:password, accountType:accountType})
            .done(function(data) {
                if(data === "success") {
                    window.location = "/index#login";
                } else if(data === "error") {
                    alert("An unexpected error has occured");
                }
                
            });     
        });

        $("#loginForm").submit(function() {
            let email = $("#login-email").val(); 
            let password = $("#login-password").val();

            $.post( "/backend", { type:"login", email:email, password:password})
            .done(function(data) {
                console.log(data);
                switch(data) {
                    case "customer":
                        window.location = "/index#customer";
                        break;
                    case "driver":
                        window.location = "/index#driver";
                        break;  
                    case "manager":
                        window.location = "/index#manager";
                        break;  
                    case "error":
                        alert("Username or password incorrect");
                        break; 
                    default:
                        window.location = "/index#login";
                }
            });
        })
    
    </script>
</html>
    
